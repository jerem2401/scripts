#dealing with version incompatibility
run-shell 'tmux setenv -g TMUX_VERSION $(tmux -V | \
                            sed -En "s/^tmux ([0-9]+(.[0-9]+)?).*/\1/p")'


# split panes using | and -
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# vim like pane moves
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# vim like resize pane, press prefix + h/j/k/l, and then just Alt h/j/k/l
#bind -r j resize-pane -D 2
#bind -r k resize-pane -U 2
#bind -r h resize-pane -L 2
#bind -r l resize-pane -R 2

# Enable mouse control (clickable windows, panes, resizable panes)
if-shell -b '[ "$(echo "$TMUX_VERSION >= 2.1" | bc)" = 1 ]' \
  "set -g mouse on"

if-shell -b '[ "$(echo "$TMUX_VERSION < 2.1" | bc)" = 1 ]' " \
  setw -g mode-mouse on; \
  set -g mouse-select-window on; \
  set -g mouse-select-pane on; \
  set -g mouse-resize-pane on"

# vim like copy paste (first C-b [, then v, then y, then C-b ])
setw -g mode-keys vi
if-shell -b '[ "$(echo "$TMUX_VERSION < 2.4" | bc)" = 1 ]' " \
  bind-key -t vi-copy 'v' begin-selection; \
  bind-key -t vi-copy 'y' copy-selection; \
  bind-key -t vi-copy 'r' rectangle-toggle"

if-shell -b '[ "$(echo "$TMUX_VERSION > 2.5" | bc)" = 1 ]' " \
  bind-key -T copy-mode-vi v   send -X begin-selection; \
  bind-key -T copy-mode-vi r   send -X rectangle-toggle; \
  bind-key -T copy-mode-vi y   send -X copy-pipe-and-cancel 'xclip -selection clipboard -in'"

# Disable entering y for quiting window
bind-key & kill-window
